{% extends "base.html" %} {% block title %} {{user.first_name}}'s Places {% endblock %} {% block content %}
<nav class="header bg-header transparent-light" data-pages="header" data-pages-header="autoresize" data-pages-resize-class="dark">
  <div class="container relative">


    <div class="pull-right clearfix" id="header">

      <div class="header-inner">
        <ul class="menu">
          {% if user %}
          <li>
            <a href="/user/{{user.username}}">My Places</a>
          </li>
          <li>
            <a>Hello {{user.first_name}}</a>
          </li>
          <li>
            <a class="btn btn-cons" href="#" data-toggle="modal" data-target="#addPlaceModal">Add Place</a>
          </li>
          {% else %}
          <li>
            <a class="btn btn-primary btn-cons" href="/signup" data-text="Sign up">Sign up</a>
          </li>
          <li>
            <a class="btn btn-cons" href="/login" data-text="Log in">Log in</a>
          </li>
          {% endif %}
        </ul>
      </div>
    </div>
  </div>
</nav>

<section class="jumbotron demo-custom-height xs-full-height bg-black">
  <div class="container-xs-height full-height">
    <div id="map"></div>
  </div>
</section>
<!-- END JUMBOTRON -->
<!-- START FOOTER -->
<section class="p-b-30 p-t-40">
  <div class="container">
    <div class="row">
      <div class="col-sm-6">
        <img src="/static/img/logo.png" width="200" height="21" data-src-retina="/static/img/logo.png" class="logo inline m-r-50" alt="">
        <div class="m-t-10 ">
          <ul class="no-style fs-11 no-padding font-arial">
            <li class="inline no-padding"><a href="#" class=" text-master p-r-10 b-r b-grey">Home</a></li>
            <li class="inline no-padding"><a href="#" class="hint-text text-master p-l-10 p-r-10 b-r b-grey">About</a></li>
            <li class="inline no-padding"><a href="#" class="hint-text text-master p-l-10 p-r-10 b-r b-grey">Contact</a></li>
            <li class="inline no-padding"><a href="#" class="hint-text text-master p-l-10 p-r-10 xs-no-padding xs-m-t-10">Github</a></li>
          </ul>
        </div>
      </div>
      <div class="col-sm-6 text-right font-arial sm-text-left">
        <p class="fs-11 muted">Copyright &copy; 2016 UNDERGROUND. All Rights Reserved.</p>
      </div>
    </div>
  </div>
</section>

{% if places %}
<script>
  var myLayer = L.mapbox.featureLayer().addTo(map);

  var geoJson = [

    {% for place in place %}
    {
      type: 'Feature',
      "geometry": {
        "type": "Point",
        "coordinates": [{{place.longitude}}, {{place.latitude}}]
      },
      "properties": {
        'id': '{{place.id}}',
        'name': '{{place.name}}',
        'description': '{{place.description}}',
        'address': '{{place.address}}'
        "marker-symbol": '{{place.category}}',
        "marker-color": "#ff8888",
        "marker-size": "large",
        "city": "Washington, D.C."
      }
    }
    {% if not loop.last %},{% endif %}
    {% endfor %}
  ];

  // Add custom popups to each using our custom feature properties
  myLayer.on('layeradd', function(e) {
    var marker = e.layer,
      feature = marker.feature;

    // Create custom popup content
    var popupContent = '<a target="_blank" class="popup" href="' + feature.properties.url + '">' +
      '<img src="' + feature.properties.image + '" />' +
      feature.properties.city +
      '</a>';

    // http://leafletjs.com/reference.html#popup
    marker.bindPopup(popupContent, {
      closeButton: false,
      minWidth: 320
    });
  });

  // Add features to the map
  myLayer.setGeoJSON(geoJson);
</script>
{% endif %}

{% endblock %} {% block foot %} {{ super() }}
<script src="/static/js/profile.js" charset="utf-8"></script>
{% endblock %}
